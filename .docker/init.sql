-- MySQL Script generated by MySQL Workbench
-- Thu Dec 18 23:07:13 2025
-- Model: Waste Bank Model
-- MySQL Workbench Forward Engineering

--
-- Database: `waste_bank`
--

-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `badge`
--

DROP TABLE IF EXISTS `badge`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `badge` (
  `badge_id` int NOT NULL AUTO_INCREMENT,
  `badge_name` varchar(100) NOT NULL,
  `badge_description` text,
  `badge_condition` text COMMENT 'เช่น "สะสมขยะ 100 kg" หรือ JSON สำหรับ logic',
  `badge_image` varchar(255) DEFAULT NULL,
  `badge_type` varchar(20) DEFAULT NULL COMMENT 'waste, goodness, overall',
  PRIMARY KEY (`badge_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `badge`
--

LOCK TABLES `badge` WRITE;
/*!40000 ALTER TABLE `badge` DISABLE KEYS */;
/*!40000 ALTER TABLE `badge` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `clearance_detail`
--

DROP TABLE IF EXISTS `clearance_detail`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `clearance_detail` (
  `clearance_detail_id` int NOT NULL AUTO_INCREMENT,
  `waste_clearance_id` int NOT NULL,
  `waste_type_id` int NOT NULL,
  `clearance_detail_transaction_weight` decimal(7,2) NOT NULL,
  `clearance_detail_clearance_weight` decimal(7,2) DEFAULT NULL,
  `clearance_detail_success` tinyint NOT NULL DEFAULT '0',
  `complete_date` datetime DEFAULT NULL,
  PRIMARY KEY (`clearance_detail_id`),
  KEY `fk_clearance_detail_clearance_idx` (`waste_clearance_id`),
  KEY `fk_clearance_detail_waste_type_idx` (`waste_type_id`),
  CONSTRAINT `fk_clearance_detail_clearance` FOREIGN KEY (`waste_clearance_id`) REFERENCES `waste_clearance` (`waste_clearance_id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `fk_clearance_detail_waste_type` FOREIGN KEY (`waste_type_id`) REFERENCES `waste_type` (`waste_type_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `clearance_detail`
--

LOCK TABLES `clearance_detail` WRITE;
/*!40000 ALTER TABLE `clearance_detail` DISABLE KEYS */;
INSERT INTO `clearance_detail` VALUES (1,3,1,14.23,NULL,0,NULL),(2,3,6,8.44,NULL,0,NULL),(3,4,4,8.63,NULL,0,NULL),(4,6,5,1.65,NULL,0,NULL),(5,6,7,10.36,NULL,0,NULL);
/*!40000 ALTER TABLE `clearance_detail` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `donation`
--

DROP TABLE IF EXISTS `donation`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `donation` (
  `donation_id` int NOT NULL AUTO_INCREMENT,
  `member_id` int DEFAULT NULL COMMENT 'หรือ external ถ้าไม่ใช่ member',
  `faculty_id` int DEFAULT NULL COMMENT 'ถ้าบริจาคให้คณะ',
  `donation_description` text,
  `donation_estimated_value` decimal(10,2) DEFAULT NULL COMMENT 'มูลค่าประมาณ (1 point ≈ 1 บาท)',
  `donation_goodness_point` int DEFAULT NULL COMMENT 'แต้มความดีให้ donor',
  `donation_reason` text COMMENT 'เหตุผลถ้าพิเศษ',
  `donation_date` date DEFAULT NULL,
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`donation_id`),
  KEY `fk_donation_member_id` (`member_id`),
  KEY `fk_donation_faculty_id` (`faculty_id`),
  CONSTRAINT `fk_donation_faculty_id` FOREIGN KEY (`faculty_id`) REFERENCES `faculty` (`faculty_id`),
  CONSTRAINT `fk_donation_member_id` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `donation`
--

LOCK TABLES `donation` WRITE;
/*!40000 ALTER TABLE `donation` DISABLE KEYS */;
/*!40000 ALTER TABLE `donation` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `faculty`
--

DROP TABLE IF EXISTS `faculty`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `faculty` (
  `faculty_id` int NOT NULL AUTO_INCREMENT,
  `faculty_name` varchar(100) NOT NULL,
  `faculty_code` varchar(20) DEFAULT NULL COMMENT 'เช่น ENG, SCI',
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`faculty_id`),
  UNIQUE KEY `faculty_name_UNIQUE` (`faculty_name`),
  UNIQUE KEY `faculty_code_UNIQUE` (`faculty_code`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `faculty`
--

LOCK TABLES `faculty` WRITE;
/*!40000 ALTER TABLE `faculty` DISABLE KEYS */;
INSERT INTO `faculty` VALUES (1,'วิทยาศาสตร์','FS','2025-12-27 20:26:14','2025-12-28 02:12:44'),(2,'ครุศาสตร์','FE','2025-12-28 02:12:44','2025-12-28 02:12:44'),(4,'เทคโนโลยีอุตสาหกรรม','FIT','2025-12-28 21:33:43',NULL),(5,'เทคโนโลยีการเกษตร','FAT','2025-12-28 21:51:49','2025-12-28 22:17:00');
/*!40000 ALTER TABLE `faculty` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `faculty_point`
--

DROP TABLE IF EXISTS `faculty_point`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `faculty_point` (
  `faculty_point_id` int NOT NULL AUTO_INCREMENT,
  `faculty_id` int DEFAULT NULL,
  `faculty_point_amount` decimal(10,4) DEFAULT NULL,
  `faculty_point_source` varchar(50) DEFAULT NULL COMMENT 'fraction จาก member, donation',
  `faculty_point_date` date DEFAULT NULL,
  `created_at` datetime DEFAULT NULL,
  PRIMARY KEY (`faculty_point_id`),
  KEY `fk_faculty_point_faculty_id` (`faculty_id`),
  CONSTRAINT `fk_faculty_point_faculty_id` FOREIGN KEY (`faculty_id`) REFERENCES `faculty` (`faculty_id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `faculty_point`
--

LOCK TABLES `faculty_point` WRITE;
/*!40000 ALTER TABLE `faculty_point` DISABLE KEYS */;
INSERT INTO `faculty_point` VALUES (1,1,0.8000,'member','2025-12-29','2025-12-29 12:27:22'),(2,2,0.6500,'member','2025-12-30','2025-12-30 12:31:33'),(3,2,0.3240,'member','2025-12-30','2025-12-30 12:33:22'),(4,1,0.4600,'member','2025-12-30','2025-12-30 13:12:11'),(6,1,0.4600,'member','2026-01-01','2026-01-01 01:08:33'),(7,1,0.3760,'member','2026-01-01','2026-01-01 01:13:18');
/*!40000 ALTER TABLE `faculty_point` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `member`
--

DROP TABLE IF EXISTS `member`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `member` (
  `member_id` int NOT NULL AUTO_INCREMENT,
  `member_personal_id` varchar(20) DEFAULT NULL COMMENT 'รหัสนักศึกษา/อาจารย์',
  `member_name` varchar(100) DEFAULT NULL,
  `member_phone` varchar(20) NOT NULL COMMENT 'ใช้เป็น username',
  `member_password` varchar(255) NOT NULL COMMENT 'hashed',
  `member_email` varchar(100) DEFAULT NULL,
  `faculty_id` int DEFAULT NULL,
  `role_id` int NOT NULL,
  `member_waste_point` decimal(10,2) DEFAULT '0.00' COMMENT 'แต้มขยะ (จำนวนเต็มจริงๆ แต่ใช้ decimal เผื่อ)',
  `member_goodness_point` decimal(10,2) DEFAULT '0.00' COMMENT 'แต้มความดี',
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`member_id`),
  UNIQUE KEY `member_phone_UNIQUE` (`member_phone`),
  UNIQUE KEY `member_student_id` (`member_personal_id`),
  UNIQUE KEY `member_name_UNIQUE` (`member_name`),
  UNIQUE KEY `member_email_UNIQUE` (`member_email`),
  KEY `fk_member_faculty_id` (`faculty_id`),
  KEY `fk_member_role_id` (`role_id`),
  CONSTRAINT `fk_member_faculty_id` FOREIGN KEY (`faculty_id`) REFERENCES `faculty` (`faculty_id`),
  CONSTRAINT `fk_member_role_id` FOREIGN KEY (`role_id`) REFERENCES `role` (`role_id`)
) ENGINE=InnoDB AUTO_INCREMENT=45 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `member`
--

LOCK TABLES `member` WRITE;
/*!40000 ALTER TABLE `member` DISABLE KEYS */;
INSERT INTO `member` VALUES (1,'1309902669455','admin','0816047264','$2y$12$eHf3/jMRxH9BAfjZHN.G8.yozUERW747FNpQkJACrJakx9Zr9PwqC',NULL,NULL,1,0.00,0.00,NULL,NULL),(5,NULL,'เปียกปอน','0123456789','$2y$12$V75oElQbotgJ/wJ7i6gTgewN1DRFwDRW8mmVHsNjbq1fPTKcQsmT.',NULL,1,2,6.00,0.00,'2025-12-28 01:07:57',NULL),(42,NULL,'user@fe','0567891234','$2y$12$nrQy/iIn.5dvhMW6x4aa3ep5HF7CUuj7cZwvifiMFRCF9jFu1mR7a',NULL,2,2,10.00,0.00,'2025-12-28 13:37:56',NULL),(43,NULL,'กิตติ','0678912345','$2y$12$PchGjKE4WfeOEXxng41KfuPWW11ossaoIF/fOfFu9lWiJHxpYWN1y',NULL,1,2,51.00,0.00,'2025-12-30 13:11:06',NULL),(44,NULL,'ศูนย์ใหญ่','0634122301','$2y$12$ojRsEtSNEO52vpAfsVkdCO7Jf2HaMse.Dh1./s.dAqGC.Ja.wqNjW',NULL,NULL,1,0.00,0.00,'2026-01-02 23:02:14',NULL);
/*!40000 ALTER TABLE `member` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `member_badge`
--

DROP TABLE IF EXISTS `member_badge`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `member_badge` (
  `member_badge_id` int NOT NULL AUTO_INCREMENT,
  `member_id` int DEFAULT NULL,
  `badge_id` int DEFAULT NULL,
  `member_badge_date` date DEFAULT NULL,
  PRIMARY KEY (`member_badge_id`),
  UNIQUE KEY `unique_idx_member_badge` (`member_id`,`badge_id`),
  KEY `fk_member_badge_badge_id` (`badge_id`),
  CONSTRAINT `fk_member_badge_badge_id` FOREIGN KEY (`badge_id`) REFERENCES `badge` (`badge_id`),
  CONSTRAINT `fk_member_badge_member_id` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `member_badge`
--

LOCK TABLES `member_badge` WRITE;
/*!40000 ALTER TABLE `member_badge` DISABLE KEYS */;
/*!40000 ALTER TABLE `member_badge` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `member_reward`
--

DROP TABLE IF EXISTS `member_reward`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `member_reward` (
  `member_reward_id` int NOT NULL AUTO_INCREMENT,
  `member_id` int DEFAULT NULL,
  `reward_id` int DEFAULT NULL,
  `member_reward_date` date DEFAULT NULL,
  `member_reward_qty` int DEFAULT '1',
  `member_reward_point_used` int DEFAULT NULL,
  `member_reward_status` varchar(20) DEFAULT 'pending' COMMENT 'pending, received, cancelled',
  PRIMARY KEY (`member_reward_id`),
  KEY `fk_member_reward_member_id` (`member_id`),
  KEY `fk_member_reward_reward_id` (`reward_id`),
  CONSTRAINT `fk_member_reward_member_id` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`),
  CONSTRAINT `fk_member_reward_reward_id` FOREIGN KEY (`reward_id`) REFERENCES `reward` (`reward_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `member_reward`
--

LOCK TABLES `member_reward` WRITE;
/*!40000 ALTER TABLE `member_reward` DISABLE KEYS */;
/*!40000 ALTER TABLE `member_reward` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `reward`
--

DROP TABLE IF EXISTS `reward`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `reward` (
  `reward_id` int NOT NULL AUTO_INCREMENT,
  `reward_name` varchar(100) NOT NULL,
  `reward_description` text,
  `reward_point_required` int DEFAULT NULL,
  `reward_stock` int DEFAULT '0',
  `reward_image` varchar(255) DEFAULT NULL,
  `reward_active` tinyint(1) DEFAULT '1',
  `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`reward_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `reward`
--

LOCK TABLES `reward` WRITE;
/*!40000 ALTER TABLE `reward` DISABLE KEYS */;
/*!40000 ALTER TABLE `reward` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `role`
--

DROP TABLE IF EXISTS `role`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `role` (
  `role_id` int NOT NULL AUTO_INCREMENT,
  `role_name` varchar(50) NOT NULL COMMENT 'เช่น member, faculty_staff, central_admin',
  `role_name_th` varchar(50) NOT NULL,
  PRIMARY KEY (`role_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `role`
--

LOCK TABLES `role` WRITE;
/*!40000 ALTER TABLE `role` DISABLE KEYS */;
INSERT INTO `role` VALUES (1,'admin','ผู้ดูแลระบบ'),(2,'user','ผู้ใช้งานทั่วไป');
/*!40000 ALTER TABLE `role` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `system_log`
--

DROP TABLE IF EXISTS `system_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `system_log` (
  `system_log_id` int NOT NULL AUTO_INCREMENT,
  `system_log_member_id` int DEFAULT NULL,
  `system_log_action` varchar(100) DEFAULT NULL,
  `system_log_detail` text,
  `system_log_timestamp` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`system_log_id`),
  KEY `fk_system_log_member_id` (`system_log_member_id`),
  CONSTRAINT `fk_system_log_member_id` FOREIGN KEY (`system_log_member_id`) REFERENCES `member` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `system_log`
--

LOCK TABLES `system_log` WRITE;
/*!40000 ALTER TABLE `system_log` DISABLE KEYS */;
/*!40000 ALTER TABLE `system_log` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `waste_category`
--

DROP TABLE IF EXISTS `waste_category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `waste_category` (
  `waste_category_id` int NOT NULL AUTO_INCREMENT,
  `waste_category_name` varchar(50) NOT NULL COMMENT 'เช่น plastic, paper, metal',
  `waste_category_co2_per_kg` decimal(10,4) DEFAULT NULL COMMENT 'ค่า CO₂e ลดได้ต่อ kg (สำหรับ carbon impact)',
  `waste_category_active` tinyint(1) DEFAULT '1',
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`waste_category_id`),
  UNIQUE KEY `waste_category_name_UNIQUE` (`waste_category_name`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `waste_category`
--

LOCK TABLES `waste_category` WRITE;
/*!40000 ALTER TABLE `waste_category` DISABLE KEYS */;
INSERT INTO `waste_category` VALUES (2,'ขวดพลาสติก',0.6300,1,'2025-12-28 23:44:28'),(3,'กระดาษ',0.8300,1,'2025-12-28 23:46:12'),(4,'ขวดแก้ว',0.2800,1,'2025-12-28 23:48:13'),(10,'โลหะ',8.1420,1,'2025-12-29 03:18:16'),(11,'พลาสติก',1.5000,1,'2026-01-01 03:25:34');
/*!40000 ALTER TABLE `waste_category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `waste_clearance`
--

DROP TABLE IF EXISTS `waste_clearance`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `waste_clearance` (
  `waste_clearance_id` int NOT NULL AUTO_INCREMENT,
  `faculty_id` int NOT NULL,
  `waste_clearance_period_start` date DEFAULT NULL,
  `waste_clearance_period_end` date DEFAULT NULL,
  `waste_clearance_value_total` decimal(12,2) DEFAULT NULL COMMENT 'มูลค่าขยะรวม',
  `waste_clearance_member_point_total` int DEFAULT NULL,
  `waste_clearance_faculty_point_total` decimal(12,2) DEFAULT NULL COMMENT 'ให้คณะ',
  `waste_clearance_status` enum('รอยืนยัน','ยืนยันแล้ว') DEFAULT 'รอยืนยัน' COMMENT 'สถานะการเคลียร์ยอด หลังเปิดรายการเคลียร์จะต้องยืนยันขยะแต่ละชนิดว่ามีจำนวนครบตาม transaction ไหม',
  `waste_clearance_created_by` int NOT NULL COMMENT 'เจ้าหน้าที่ที่ทำการสร้างรายการเคลียร์ยอดนี้',
  `waste_clearance_approved_by` int DEFAULT NULL COMMENT 'เจ้าหน้าที่ที่ทำการอนุมัติรายการเคลียร์',
  `created_at` datetime DEFAULT NULL,
  `approved_at` datetime DEFAULT NULL,
  PRIMARY KEY (`waste_clearance_id`),
  KEY `fk_waste_clearance_faculty` (`faculty_id`),
  KEY `fk_waste_clearance_started_by_idx` (`waste_clearance_created_by`),
  KEY `fk_waste_clearance_approved_by` (`waste_clearance_approved_by`),
  CONSTRAINT `fk_waste_clearance_approved_by` FOREIGN KEY (`waste_clearance_approved_by`) REFERENCES `member` (`member_id`),
  CONSTRAINT `fk_waste_clearance_faculty` FOREIGN KEY (`faculty_id`) REFERENCES `faculty` (`faculty_id`),
  CONSTRAINT `fk_waste_clearance_started_by` FOREIGN KEY (`waste_clearance_created_by`) REFERENCES `member` (`member_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `waste_clearance`
--

LOCK TABLES `waste_clearance` WRITE;
/*!40000 ALTER TABLE `waste_clearance` DISABLE KEYS */;
INSERT INTO `waste_clearance` VALUES (3,1,'2026-01-01','2026-01-01',31.84,31,0.84,'รอยืนยัน',1,NULL,'2026-01-05 20:16:05',NULL),(4,1,'2025-12-01','2025-12-30',17.26,16,1.26,'รอยืนยัน',1,NULL,'2026-01-05 21:24:40',NULL),(6,2,'2025-12-01','2025-12-30',10.97,10,0.97,'รอยืนยัน',1,NULL,'2026-01-05 21:36:15',NULL);
/*!40000 ALTER TABLE `waste_clearance` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `waste_sale`
--

DROP TABLE IF EXISTS `waste_sale`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `waste_sale` (
  `waste_sale_id` int NOT NULL AUTO_INCREMENT,
  `waste_sale_type_id` int DEFAULT NULL,
  `waste_sale_weight` decimal(10,3) DEFAULT NULL,
  `waste_sale_actual_price` decimal(12,2) DEFAULT NULL,
  `waste_sale_buyer` varchar(100) DEFAULT NULL,
  `waste_sale_date` date DEFAULT NULL,
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`waste_sale_id`),
  KEY `fk_waste_sale_type_id` (`waste_sale_type_id`),
  CONSTRAINT `fk_waste_sale_type_id` FOREIGN KEY (`waste_sale_type_id`) REFERENCES `waste_category` (`waste_category_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `waste_sale`
--

LOCK TABLES `waste_sale` WRITE;
/*!40000 ALTER TABLE `waste_sale` DISABLE KEYS */;
/*!40000 ALTER TABLE `waste_sale` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `waste_transaction`
--

DROP TABLE IF EXISTS `waste_transaction`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `waste_transaction` (
  `waste_transaction_id` int NOT NULL AUTO_INCREMENT,
  `member_id` int NOT NULL,
  `faculty_id` int NOT NULL COMMENT 'คณะที่รับ',
  `staff_id` int NOT NULL COMMENT 'เจ้าหน้าที่คณะที่บันทึก',
  `waste_transaction_waste_type` int NOT NULL,
  `waste_transaction_weight` decimal(6,2) NOT NULL COMMENT 'น้ำหนัก kg',
  `waste_transaction_member_point` int NOT NULL COMMENT 'แต้มเต็มให้ member (ปัดเศษลง)',
  `waste_transaction_faculty_fraction` decimal(10,4) NOT NULL COMMENT 'เศษทศนิยมสะสมให้คณะ',
  `waste_transaction_date` date NOT NULL,
  `waste_transaction_note` text,
  `waste_clearance_id` int DEFAULT NULL,
  `created_at` datetime NOT NULL,
  PRIMARY KEY (`waste_transaction_id`),
  KEY `fk_waste_transaction_member_id` (`member_id`),
  KEY `fk_waste_transaction_faculty_id` (`faculty_id`),
  KEY `fk_waste_transaction_waste_type_id_idx` (`waste_transaction_waste_type`),
  KEY `fk_waste_transaction_staff_id` (`staff_id`),
  CONSTRAINT `fk_waste_transaction_faculty_id` FOREIGN KEY (`faculty_id`) REFERENCES `faculty` (`faculty_id`),
  CONSTRAINT `fk_waste_transaction_member_id` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`),
  CONSTRAINT `fk_waste_transaction_staff_id` FOREIGN KEY (`staff_id`) REFERENCES `member` (`member_id`),
  CONSTRAINT `fk_waste_transaction_waste_type_id` FOREIGN KEY (`waste_transaction_waste_type`) REFERENCES `waste_type` (`waste_type_id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `waste_transaction`
--

LOCK TABLES `waste_transaction` WRITE;
/*!40000 ALTER TABLE `waste_transaction` DISABLE KEYS */;
INSERT INTO `waste_transaction` VALUES (4,5,1,1,4,3.40,6,0.8000,'2025-12-29',NULL,4,'2025-12-29 12:27:22'),(7,42,2,1,5,1.65,1,0.6500,'2025-12-28',NULL,6,'2025-12-29 12:31:33'),(8,42,2,1,7,10.36,9,0.3240,'2025-12-28',NULL,6,'2025-12-30 12:33:22'),(9,43,1,1,4,5.23,10,0.4600,'2025-12-28',NULL,4,'2025-12-30 13:12:11'),(11,43,1,1,1,14.23,28,0.4600,'2026-01-01',NULL,3,'2026-01-01 01:08:33'),(12,43,1,1,6,8.44,3,0.3760,'2026-01-01',NULL,3,'2026-01-01 01:13:18');
/*!40000 ALTER TABLE `waste_transaction` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `waste_type`
--

DROP TABLE IF EXISTS `waste_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `waste_type` (
  `waste_type_id` int NOT NULL AUTO_INCREMENT,
  `waste_type_name` varchar(50) NOT NULL COMMENT 'เช่น plastic, paper, metal',
  `waste_type_price` decimal(10,2) NOT NULL COMMENT 'ราคาต่อกิโล (ตั้งโดย central admin)',
  `waste_type_co2` decimal(10,4) NOT NULL COMMENT 'ค่า CO₂e ลดได้ต่อ kg (สำหรับ carbon impact)',
  `waste_category_id` int DEFAULT NULL,
  `waste_type_active` tinyint(1) DEFAULT '1',
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`waste_type_id`),
  UNIQUE KEY `waste_type_name_UNIQUE` (`waste_type_name`),
  KEY `fk_waste_type_category_id` (`waste_category_id`),
  CONSTRAINT `fk_waste_type_category_id` FOREIGN KEY (`waste_category_id`) REFERENCES `waste_category` (`waste_category_id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `waste_type`
--

LOCK TABLES `waste_type` WRITE;
/*!40000 ALTER TABLE `waste_type` DISABLE KEYS */;
INSERT INTO `waste_type` VALUES (1,'กระดาษขาวดำ',2.00,0.8300,3,1,'2025-12-29 16:53:49','2026-01-01 04:37:48'),(4,'กระดาษลัง',2.00,3.1400,3,1,'2025-12-29 17:44:33','2026-01-01 04:39:09'),(5,'ขวดแก้วใส',1.00,0.2800,4,1,'2025-12-29 17:46:15','2025-12-29 17:46:15'),(6,'สีขุ่น/รวม',0.40,0.2800,4,1,'2025-12-29 17:47:53','2025-12-29 17:53:01'),(7,'สีชา/เขียว+ฝา',0.90,0.2800,4,1,'2025-12-29 17:50:43','2025-12-29 17:50:43'),(8,'พลาสติกรวมสี',2.00,0.4000,11,1,'2026-01-01 19:05:40','2026-01-01 19:43:05'),(9,'ขวด PET ',4.00,0.6300,2,1,'2026-01-01 19:42:11','2026-01-01 19:42:38');
/*!40000 ALTER TABLE `waste_type` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2026-01-05 22:19:06
